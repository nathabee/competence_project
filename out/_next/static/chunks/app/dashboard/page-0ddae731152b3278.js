(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{88416:(e,r,t)=>{Promise.resolve().then(t.bind(t,3192))},3192:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var s=t(57437),a=t(2265),l=t(77640),n=t(16463),i=t(12514);t(68484);var o=t(85042);let c=e=>{let{reportCatalogue:r,isNegativeSeuil:t}=e,[l,n]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"catalogue-item mb-2",children:[(0,s.jsxs)("h6",{onClick:()=>n(!l),className:"catalogue-title ".concat(l?"expanded":""),style:{color:t?"var(--custom-alert)":"inherit"},children:["Test: ",r.catalogue," ",l?"â–²":"â–¼"]}),l&&(0,s.jsx)("div",{className:"catalogue-results",style:{color:t?"var(--custom-alert)":"inherit"},children:r.resultats.length>0?(0,s.jsx)("ul",{children:r.resultats.map(e=>(0,s.jsxs)("li",{children:[e.groupage.label_groupage," | Score: ",Math.round(e.score),"/ Max: ",e.groupage.max_point," | Seuil1: ",Math.round(e.seuil1_percent),"% | Seuil2: ",Math.round(e.seuil2_percent),"% | Seuil3: ",Math.round(e.seuil3_percent),"%"]},e.id))}):(0,s.jsx)("p",{children:"Pas de resultat disponible pour ce test"})})]})},u=e=>{let{reports:r}=e,t=e=>e.report_catalogues.some(e=>e.resultats.some(e=>e.seuil1_percent<0||e.seuil2_percent<0||e.seuil3_percent<0));return(0,s.jsx)("div",{className:"tab-content mt-3",children:r.length>0?r.map(e=>{let r=t(e);return(0,s.jsxs)("div",{className:"report-card mb-3",children:[(0,s.jsxs)("h5",{style:{color:r?"var(--custom-alert)":"inherit"},children:["Report ID: ",e.id," | \xe9l\xe8ve: ",e.eleve.prenom," ",e.eleve.nom," ",e.eleve.niveau]}),(0,s.jsxs)("p",{children:[e.professeur?(0,s.jsxs)("span",{children:["Professeur: ",e.professeur.first_name," ",e.professeur.last_name]}):(0,s.jsx)("span",{children:"Professeur non attribu\xe9"}),(0,s.jsx)("br",{}),"Date cr\xe9ation: ",new Date(e.created_at).toLocaleString()," | Mise a jour: ",new Date(e.updated_at).toLocaleString()]}),(0,s.jsx)("div",{className:"report-catalogues",children:(0,s.jsx)("div",{children:e.report_catalogues.length>0?e.report_catalogues.map(e=>(0,s.jsx)(c,{reportCatalogue:e,isNegativeSeuil:r},e.id)):(0,s.jsx)("p",{children:"Pas de catalogue trouv\xe9 pour ce rapport"})})})]},e.id)}):(0,s.jsx)("p",{children:"Pas de rapport disponible."})})};var d=t(53481);let p=()=>{let e=(0,n.useRouter)(),[r,t]=(0,a.useState)(!0),[c,p]=(0,a.useState)(!1),[h,m]=(0,a.useState)([]),g=(0,d.Z)(),x=(0,a.useCallback)(async()=>{let r=(0,o.$)();if(!r){e.push("/login");return}t(!0),p(!1);try{let e=await l.Z.get("".concat("/api","/shortreports/"),{headers:{Authorization:"Bearer ".concat(r)}});m(e.data)}catch(e){console.error("Error fetching data:",e),p(!0)}finally{t(!1)}},[e]);return((0,a.useEffect)(()=>{x()},[x]),r)?(0,s.jsxs)("div",{className:"loading-indicator",children:[(0,s.jsx)("p",{children:g("msg_load")}),(0,s.jsx)(i.Z,{animation:"border"})]}):c?(0,s.jsx)("p",{children:g("msg_loadErr")}):(0,s.jsxs)("div",{className:"container mt-3 ml-2",children:[(0,s.jsx)("h1",{children:g("pgH_histo")}),(0,s.jsx)("button",{onClick:x,className:"btn btn-primary mb-3",children:g("msg_refresh")}),(0,s.jsx)(u,{reports:h})]})}},53481:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});var s=t(72609);let a=(e,r)=>e.replace(/\{(\w+)\}/g,(e,t)=>r[t]||"{".concat(t,"}")),l=()=>{let{translations:e}=(0,s.a)();return function(r){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e[r];return s?a(s,t):"".concat(r)}}},68484:()=>{}},e=>{var r=r=>e(e.s=r);e.O(0,[441,451,609,130,215,744],()=>r(88416)),_N_E=e.O()}]);