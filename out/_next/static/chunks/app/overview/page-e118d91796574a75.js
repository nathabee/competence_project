(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{50128:(e,t,r)=>{Promise.resolve().then(r.bind(r,24367))},24367:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(57437),l=r(2265),n=r(72609),i=r(66648);r(63275);var d=r(47993);let a=e=>(e.seuil1_percent+e.seuil2_percent+e.seuil3_percent)/3,c=e=>{let{report_catalogues:t}=e,{activeReport:r}=(0,n.a)(),l=r?r.report_catalogues:t;return(0,s.jsx)("div",{children:(0,s.jsxs)("table",{className:"table table-bordered",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Catalogue"}),(0,s.jsx)("th",{children:"Groupage"}),(0,s.jsx)("th",{children:"Total score"}),(0,s.jsx)("th",{children:"Max score"}),(0,s.jsx)("th",{children:"Comp\xe9tence acquise"}),(0,s.jsx)("th",{children:"Avancement"}),(0,s.jsx)("th",{children:"seuil1_percent"}),(0,s.jsx)("th",{children:"seuil2_percent"}),(0,s.jsx)("th",{children:"seuil3_percent"}),(0,s.jsx)("th",{children:"ic\xf4ne"})]})}),(0,s.jsx)("tbody",{children:l&&l.length>0?l.map((e,t)=>e.resultats.map((r,l)=>{let n="competence_icon_".concat(r.groupage.groupage_icon_id),c=localStorage.getItem(n)||null;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.catalogue.description}),(0,s.jsx)("td",{children:r.groupage.label_groupage}),(0,s.jsx)("td",{children:r.score.toFixed(2)}),(0,s.jsx)("td",{children:r.groupage.max_point.toFixed(2)}),(0,s.jsxs)("td",{children:[Math.round(r.score/r.groupage.max_point*100),"%"]}),(0,s.jsx)("td",{children:a(r).toFixed(2)}),(0,s.jsx)("td",{children:r.seuil1_percent}),(0,s.jsx)("td",{children:r.seuil2_percent}),(0,s.jsx)("td",{children:r.seuil3_percent}),(0,s.jsx)("td",{children:(0,s.jsx)(i.default,{src:c?"".concat(c):d.Z,alt:c?"Groupage Icon":"Default Icon",width:50,height:50,style:{marginRight:"10px"}})})]},"".concat(t,"-").concat(l))})):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:10,children:"No data available"})})})]})})},h=e=>{let{report_catalogues:t}=e,{activeReport:r}=(0,n.a)(),l=r?r.report_catalogues:t;return(0,s.jsx)("div",{children:(0,s.jsxs)("table",{className:"table table-bordered",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Catalogue"}),(0,s.jsx)("th",{children:"Groupage"}),(0,s.jsx)("th",{children:"Total score"}),(0,s.jsx)("th",{children:"Max score"}),(0,s.jsx)("th",{children:"Comp\xe9tence acquise"}),(0,s.jsx)("th",{children:"seuil1_percent"}),(0,s.jsx)("th",{children:"seuil2_percent"}),(0,s.jsx)("th",{children:"seuil3_percent"}),(0,s.jsx)("th",{children:"ic\xf4ne"})]})}),(0,s.jsx)("tbody",{children:l&&l.length>0?l.map((e,t)=>e.resultats.filter(e=>e.seuil2_percent<100||e.seuil1_percent<100).map((r,l)=>{let n="competence_icon_".concat(r.groupage.groupage_icon_id),a=localStorage.getItem(n)||null,c=r.seuil1_percent<100;return(0,s.jsxs)("tr",{style:c?{fontWeight:"bold"}:{},children:[(0,s.jsx)("td",{children:e.catalogue.description}),(0,s.jsx)("td",{children:r.groupage.label_groupage}),(0,s.jsx)("td",{children:r.score.toFixed(2)}),(0,s.jsx)("td",{children:r.groupage.max_point.toFixed(2)}),(0,s.jsxs)("td",{children:[Math.round(r.score/r.groupage.max_point*100),"%"]}),(0,s.jsxs)("td",{children:[Math.round(r.seuil1_percent),"%"]}),(0,s.jsxs)("td",{children:[Math.round(r.seuil2_percent),"%"]}),(0,s.jsxs)("td",{children:[Math.round(r.seuil3_percent),"%"]}),(0,s.jsx)("td",{children:(0,s.jsx)(i.default,{src:a?"".concat(a):d.Z,alt:a?"Groupage Icon":"Default Icon",width:50,height:50,style:{marginRight:"10px"}})})]},"".concat(t,"-").concat(l))})):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:10,children:"No data available"})})})]})})};var o=r(20276);let x=e=>{let{user:t}=e;return t?(0,s.jsxs)("div",{children:[" ",t.first_name," ",t.last_name," Identifiant: ",t.username," Language: ",t.lang," Roles: ",t.roles.join(", ")]}):(0,s.jsx)("p",{children:"Pas d'information sur l'utilisateur"})};var u=r(53481);let j=e=>{let{eleve:t}=e,r=(0,u.Z)();return t?(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[r("msg_chosenStud"),": ",t.nom," ",t.prenom," ",r(t.niveau_description),", ",r("tbH_birthDt"),": ",t.datenaissance]}),(0,s.jsxs)("p",{children:[r("tbH_prof"),":"]}),t.professeurs_details.length>0?(0,s.jsx)("ul",{children:t.professeurs_details.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)(x,{user:e})},e.id))}):(0,s.jsx)("p",{children:r("msg_noProf")})]}):(0,s.jsx)("p",{children:r("msg_noInfo")})};var p=r(49968),g=r(53511),m=r(85042),_=r(16463);let v=()=>{var e,t;let{activeCatalogues:r,activeEleve:i,activeReport:d,user:a,activeLayout:u}=(0,n.a)(),v=(0,_.useRouter)();return((0,l.useEffect)(()=>{let e=(0,m.$)();if(!e||(0,m.p)(e)){v.push("/login");return}},[v]),i&&a&&d&&u&&r)?(0,s.jsxs)("div",{className:"container mt-3 ml-2",children:[(0,s.jsx)("h1",{children:"R\xe9sum\xe9 des tests en cours:"}),(0,s.jsx)("h3",{children:"Professeur: "}),(0,s.jsx)(x,{user:a}),(0,s.jsx)("h3",{children:"Eleve: "}),(0,s.jsx)(j,{eleve:i}),(0,s.jsx)("h3",{children:"Catalogue: "}),(0,s.jsx)(p.Z,{selectedCatalogue:r}),(0,s.jsx)("h1",{children:"Mise en page s\xe9lectionn\xe9e:"}),(0,s.jsx)(g.Z,{layout:u}),(0,s.jsx)("h2",{children:"R\xe9sum\xe9 des scores:"}),(0,s.jsx)(c,{report_catalogues:null!==(e=null==d?void 0:d.report_catalogues)&&void 0!==e?e:[]}),(0,s.jsx)("h2",{children:"R\xe9sum\xe9 des difficult\xe9s:"}),(0,s.jsx)(h,{report_catalogues:null!==(t=null==d?void 0:d.report_catalogues)&&void 0!==t?t:[]}),(0,s.jsx)("h2",{children:"Rapport d\xe9taill\xe9 des difficult\xe9s rencontr\xe9es:"}),d?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.Z,{eleve:i,professor:a,pdflayout:u,report:d,max_item:40,self_page:!0})}):(0,s.jsx)("p",{children:"Pas de rapport s\xe9lectionn\xe9."})]}):(0,s.jsx)("p",{children:"Loading data..."})}},49968:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(57437);r(2265),r(63275);var l=r(53481);let n=e=>{let{selectedCatalogue:t}=e,r=(0,l.Z)();return t.length?(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:r("tab_year")}),(0,s.jsx)("th",{children:r("tab_level")}),(0,s.jsx)("th",{children:r("tab_stage")}),(0,s.jsx)("th",{children:r("tab_subject")}),(0,s.jsx)("th",{children:r("tab_desc")})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{className:"selected-row",children:[" ",(0,s.jsx)("td",{children:e.annee.annee}),(0,s.jsx)("td",{children:e.niveau.niveau}),(0,s.jsx)("td",{children:e.etape.etape}),(0,s.jsx)("td",{children:e.matiere.matiere}),(0,s.jsx)("td",{children:e.description})]},e.id))})]})}):(0,s.jsx)("p",{children:r("msg_noCtg")})}},53511:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(57437);r(2265);var l=r(66648);let n=e=>{let{layout:t}=e;return t?(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Mise en page choisie:"}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(l.default,{src:"".concat(t.header_icon_base64),alt:"Icon",width:50,height:50,style:{marginRight:"10px"}}),(0,s.jsxs)("p",{children:["Nom de l'\xe9cole: ",t.schule_name]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:["Message en-t\xeate: ",t.header_message]}),(0,s.jsxs)("p",{children:["Pied de page 1: ",t.footer_message1]}),(0,s.jsxs)("p",{children:["Pied de page 2: ",t.footer_message2]})]})]}):(0,s.jsx)("p",{children:"No layout information available."})}},45469:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(57437),l=r(2265),n=r(98191);let i=e=>{let{layout:t,professor:r,eleve:i,report:d}=e,a=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=a.current,r=null==e?void 0:e.getContext("2d");if(e&&r){let s=new Image;s.src=t.header_icon_base64,s.onload=()=>{e.width=s.width,e.height=s.height,r.drawImage(s,0,0)},s.onerror=e=>{console.error("Erreur chargement image:",e)}}},[t.header_icon_base64]),(0,s.jsxs)("div",{className:"print-header-container",children:[(0,s.jsxs)("div",{id:"print-header-logo-container",children:[(0,s.jsx)("div",{id:"print-header-logo",children:(0,s.jsx)("canvas",{ref:a,id:"headerCanvas"})}),(0,s.jsx)("div",{id:"print-header-school",children:(0,s.jsx)("div",{children:t.schule_name})})]}),(0,s.jsx)("div",{className:"print-header-gap",children:"   "}),(0,s.jsxs)("div",{className:"print-header-info",children:[(0,s.jsx)("div",{className:"print-header-professor",children:(0,s.jsxs)("div",{children:["P\xe9dagogue : ",r.last_name," ",r.first_name," "]})}),(0,s.jsx)("div",{className:"print-header-eleve",children:(0,s.jsxs)("div",{children:["El\xe8ve : ",i.nom,"  ",i.prenom," , ",i.niveau_description]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{children:["Rapport cr\xe9\xe9 le: ",(0,n.p6)(d.created_at)]})})]})]})}},20276:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(57437),l=r(2265),n=r(66648),i=r(72609);r(61119);var d=r(45469);let a=e=>{let{eleve:t,professor:r,pdflayout:a,report:c,max_item:h,self_page:o}=e,{activeReport:x}=(0,i.a)(),u=(x?x.report_catalogues:c.report_catalogues).flatMap(e=>e.resultats.filter(e=>e.seuil2_percent<100||e.seuil1_percent<100).flatMap(t=>{let r=t.seuil2_percent<100&&t.resultat_details?t.resultat_details.map(e=>({type:"detail",detail:e})):[];return[{type:"main",reportCatalogue:e,resultat:t},...r]})),j=[];for(let e=0;e<u.length;e+=h)j.push(u.slice(e,e+h));let[p,g]=(0,l.useState)(0),m=e=>(0,s.jsxs)("table",{className:"table table-bordered",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{}),(0,s.jsx)("th",{children:"Type de tests"}),(0,s.jsx)("th",{children:"Score"}),(0,s.jsx)("th",{children:"Max score"}),(0,s.jsx)("th",{children:"Avancement"}),(0,s.jsx)("th",{children:"seuil1"}),(0,s.jsx)("th",{children:"seuil2"}),(0,s.jsx)("th",{children:"seuil3"})]})}),(0,s.jsx)("tbody",{children:e.map((e,t)=>{if("main"===e.type){let{reportCatalogue:r,resultat:l}=e,i=l.seuil1_percent<100,d="competence_icon_".concat(l.groupage.groupage_icon_id),a=localStorage.getItem(d)||null;return(0,s.jsxs)("tr",{style:i?{fontWeight:"bold"}:{},children:[(0,s.jsxs)("td",{children:[a?(0,s.jsx)(n.default,{src:"".concat(a),alt:"Groupage Icon",width:20,height:20,style:{marginRight:"10px"}}):null,r.catalogue.description]}),(0,s.jsx)("td",{children:l.groupage.label_groupage}),(0,s.jsx)("td",{children:l.score.toFixed(0)}),(0,s.jsx)("td",{children:l.groupage.max_point.toFixed(0)}),(0,s.jsxs)("td",{children:[Math.round(l.score/l.groupage.max_point*100),"%"]}),(0,s.jsxs)("td",{children:[Math.round(l.seuil1_percent),"%"]}),(0,s.jsxs)("td",{children:[Math.round(l.seuil2_percent),"%"]}),(0,s.jsxs)("td",{children:[Math.round(l.seuil3_percent),"%"]})]},t)}if("detail"===e.type){let{detail:r}=e;return 2*r.score<r.item.max_score?(0,s.jsxs)("tr",{style:{fontWeight:"normal"},children:[(0,s.jsx)("td",{colSpan:2,style:{paddingLeft:"30px"},children:r.item.description}),(0,s.jsx)("td",{children:Math.round(r.score)}),(0,s.jsx)("td",{children:r.item.max_score}),(0,s.jsx)("td",{children:r.observation}),(0,s.jsx)("td",{colSpan:3})]},"".concat(t,"-detail")):null}return null})})]});return(0,s.jsx)("div",{children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{id:"printable-summary-".concat(p),className:"print-container",children:[(0,s.jsx)(d.Z,{layout:a,professor:r,eleve:t,report:c}),(0,s.jsx)("h2",{children:"Rapport d\xe9taill\xe9 des difficult\xe9s rencontr\xe9es:"}),m(j[p])]}),(0,s.jsxs)("div",{className:"pagination-controls",children:[(0,s.jsx)("button",{onClick:()=>{p>0&&g(p-1)},disabled:0===p,children:"Pr\xe9c\xe9dent"}),(0,s.jsxs)("span",{children:["Page ",p+1," sur ",j.length]}),(0,s.jsx)("button",{onClick:()=>{p<j.length-1&&g(p+1)},disabled:p===j.length-1,children:"Suivant"})]})]}):(0,s.jsx)("div",{children:Array.from({length:j.length}).map((e,l)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"spacing"})," ",(0,s.jsxs)("div",{id:"printable-summary-".concat(l),className:"print-container",children:[(0,s.jsx)(d.Z,{layout:a,professor:r,eleve:t,report:c}),(0,s.jsx)("h2",{children:"Rapport d\xe9taill\xe9 des difficult\xe9s rencontr\xe9es:"}),m(j[l])]})]},l))})})}},53481:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(72609);let l=(e,t)=>e.replace(/\{(\w+)\}/g,(e,r)=>t[r]||"{".concat(r,"}")),n=()=>{let{translations:e}=(0,s.a)();return function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e[t];return s?l(s,r):"".concat(t)}}},63275:()=>{},61119:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[441,757,964,82,609,130,215,744],()=>t(50128)),_N_E=e.O()}]);